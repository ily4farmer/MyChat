(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{43:function(e,t,a){},44:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a(24),s=a.n(n),r=(a(43),a(18)),o=a(30),i=(a(44),a(17));i.a.initializeApp({apiKey:"AIzaSyBfQBzoLibg1740oXi6i6fbOOeUbUbVJKM",authDomain:"my-chat-41ee5.firebaseapp.com",projectId:"my-chat-41ee5",storageBucket:"my-chat-41ee5.appspot.com",messagingSenderId:"396979646875",appId:"1:396979646875:web:18fc23a51ad5321822313e"});var l=i.a.auth(),u=i.a.firestore(),d=(a(50),a(4));function j(e){var t=e.user;return Object(d.jsx)("header",{className:"header",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"header-block",children:[Object(d.jsx)("div",{className:"header__logo",children:"MyChat"}),t?Object(d.jsx)("button",{onClick:function(){return l.signOut()},className:"header__button btn",children:"\u0412\u044b\u0439\u0442\u0438"}):Object(d.jsx)("button",{className:"header__button btn",children:"\u041b\u043e\u0433\u0438\u043d"})]})})})}var b=a(10),m=(a(52),a(16)),h=a(22);a(56);function p(e){var t=e.title,a=e.methodForm,c=Object(m.b)(),n=Object(m.c)((function(e){return e.form}));return Object(d.jsxs)("form",{action:"#",className:"form",onSubmit:a,children:[Object(d.jsx)("h2",{className:"form__template",children:t}),Object.keys(n).map((function(e){return Object(d.jsxs)("label",{children:[Object(d.jsx)("label",{className:"form__label",children:n[e].label}),Object(d.jsx)("input",{onChange:function(e){return function(e){var t=Object(h.a)({},n);switch(!0){case"email"===e.target.type:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value)?(t.email.emailValue=e.target.value,c({type:"state",payload:t})):(t.email.emailValue="",c({type:"state",payload:t}));break;case"password"===e.target.type:e.target.value.length>6?(t.password.passwordValue=e.target.value,c({type:"state",payload:t})):(t.password.passwordValue="",c({type:"state",payload:t}))}}(e)},type:n[e].type,className:"form__input",required:!0})]},e)})),Object(d.jsx)("input",{type:"submit",placeholder:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",className:"form__input-btn btn"})]})}function O(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.form})),a=t.email.emailValue,c=t.password.passwordValue;return Object(d.jsx)(p,{title:"\u0412\u043e\u0439\u0442\u0438",methodForm:function(n){n.preventDefault(),i.a.auth().signInWithEmailAndPassword(a,c).then((function(e){return e})).catch((function(e){console.log("Error: "+e.toString())})),t.email.emailValue="",t.password.passwordValue="",e({type:"state",payload:t})}})}function f(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.form})),a=t.email.emailValue,c=t.password.passwordValue;return Object(d.jsx)(p,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",methodForm:function(n){n.preventDefault(),i.a.auth().createUserWithEmailAndPassword(a,c).then((function(e){return e})).catch((function(e){console.log("Error: "+e.toString())})),t.email.emailValue="",t.password.passwordValue="",e({type:"state",payload:t})}})}var x=a(32),v=a.n(x),g=a(36),y=(a(58),a(26)),_=a(37);a(59);function N(){return Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)("div",{className:"lds-hourglass"})})}var w="/home",V="/chat",k=[{path:w,component:function(){var e=Object(c.useState)(!0),t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(d.jsx)("section",{className:"home",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"home-block",children:[Object(d.jsx)("h1",{className:"home__title",children:"MYCHAT"}),a?Object(d.jsx)(O,{}):Object(d.jsx)(f,{}),Object(d.jsxs)("div",{className:"home__footer",children:[Object(d.jsx)("div",{className:"home__link",style:a?{fontWeight:"bold"}:{fontWeight:"normal"},onClick:function(){return n(!0)},children:"\u0412\u043e\u0439\u0442\u0438"}),Object(d.jsx)("div",{className:"home__link",style:a?{fontWeight:"normal"}:{fontWeight:"bold"},onClick:function(){return n(!1)},children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})})})}}],A=[{path:V,component:function(){var e=Object(y.a)(l),t=Object(r.a)(e,1)[0],a=Object(c.useState)(""),n=Object(r.a)(a,2),s=n[0],o=n[1],j=Object(_.a)(u.collection("messages").orderBy("createdAt")),b=Object(r.a)(j,2),m=b[0],h=b[1],p=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.collection("messages").add({uid:t.uid,displayName:t.email,text:s,createdAt:i.a.firestore.FieldValue.serverTimestamp()}),o("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return h?Object(d.jsx)(N,{}):Object(d.jsx)("section",{className:"chat",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"chat-block",children:[Object(d.jsx)("div",{className:"chat__window",children:m.map((function(e){return Object(d.jsxs)("div",{className:"message",style:{marginLeft:t.uid===e.uid?"auto":"10px"},children:[Object(d.jsx)("div",{className:"message__name",children:e.displayName}),Object(d.jsx)("div",{className:"message__text",children:e.text})]},e.createdAt)}))}),Object(d.jsxs)("div",{className:"chat__footer",children:[Object(d.jsx)("input",{value:s,onChange:function(e){return o(e.target.value)},type:"text",className:"chat__input"}),Object(d.jsx)("button",{onClick:p,className:"chat__btn btn",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})})})}}];function C(e){var t=e.user;return e.loading?Object(d.jsx)(N,{}):t?Object(d.jsxs)(b.d,{children:[A.map((function(e){var t=e.path,a=e.component;return Object(d.jsx)(b.b,{path:t,component:a,exact:!0},t)})),Object(d.jsx)(b.a,{to:V})]}):Object(d.jsxs)(b.d,{children:[k.map((function(e){var t=e.path,a=e.component;return Object(d.jsx)(b.b,{path:t,component:a,exact:!0},t)})),Object(d.jsx)(b.a,{to:w})]})}var S=function(){var e=Object(y.a)(l),t=Object(r.a)(e,3),a=t[0],c=t[1];return t[2],Object(d.jsxs)(o.a,{children:[Object(d.jsx)(j,{user:a}),Object(d.jsx)(C,{user:a,loading:c})]})},W=a(27),I=a(38),z={email:{emailValue:"",type:"email",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email"},password:{passwordValue:"",type:"password",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 password"}},B=Object(W.combineReducers)({form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"state":return Object(h.a)(Object(h.a)({},e),t.payload);default:return e}}}),E=Object(W.createStore)(B,Object(I.composeWithDevTools)());s.a.render(Object(d.jsx)(m.a,{store:E,children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.5b16120c.chunk.js.map